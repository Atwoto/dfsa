<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Key Points Assessment Form</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 2rem;
            background-color: #f4f7f9;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #1a253c;
            border-bottom: 2px solid #e1e8f0;
            padding-bottom: 10px;
        }
        .assessment-point {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e1e8f0;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        label {
            font-weight: 600;
            display: block;
            margin-bottom: 5px;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .output-section {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f0faff;
            border: 1px solid #bde0ff;
            border-radius: 4px;
            min-height: 40px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        #generate-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 2rem;
        }
        #generate-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>10 Key Points Assessment Form</h1>
    
    <div class="assessment-point">
        <h2>1. Financial Services, Legal Status, etc.</h2>
        <div class="form-grid">
            <div><label for="p1_service_type">Primary Financial Service Type</label><input type="text" id="p1_service_type" value="Advisory and Arranging"></div>
            <div><label for="p1_prudential_cat">Prudential Category</label><input type="text" id="p1_prudential_cat" value="Category 3C"></div>
            <div><label for="p1_legal_status">Legal Status</label><input type="text" id="p1_legal_status" value="Private Company Limited by Shares"></div>
            <div><label for="p1_clients">Proposed Client Types</label><input type="text" id="p1_clients" value="Retail and Professional"></div>
        </div>
        <div class="output-section" id="output-1"></div>
    </div>
    
    <div class="assessment-point">
        <h2>2. Business Overview</h2>
        <div><label for="p2_model_desc">Business Model Description</label><textarea id="p2_model_desc">A regional wealth management firm</textarea></div>
        <div class="form-grid">
            <div><label for="p2_markets">Target Markets</label><input type="text" id="p2_markets" value="HNW clients"></div>
            <div><label for="p2_geo_scope">Geographic Scope</label><input type="text" id="p2_geo_scope" value="the GCC"></div>
             <div><label for="p2_channels">Delivery Channels</label><input type="text" id="p2_channels" value="face-to-face meetings"></div>
        </div>
        <div class="output-section" id="output-2"></div>
    </div>

    <div class="assessment-point">
        <h2>3. Who Controls</h2>
        <div class="form-grid">
            <div><label for="p3_structure">Ownership Structure</label><input type="text" id="p3_structure" value="wholly owned by a holding company"></div>
            <div><label for="p3_parent_name">Parent Company Name</label><input type="text" id="p3_parent_name" value="XYZ Holdings Ltd."></div>
            <div><label for="p3_parent_jurisdiction">Jurisdiction of Parent</label><input type="text" id="p3_parent_jurisdiction" value="the Cayman Islands"></div>
            <div><label for="p3_controller_name">Primary Controller Name</label><input type="text" id="p3_controller_name" value="a single individual shareholder"></div>
            <div><label for="p3_controller_perc">Primary Controller Percentage</label><input type="text" id="p3_controller_perc" value="100%"></div>
        </div>
        <div class="output-section" id="output-3"></div>
    </div>

    <div class="assessment-point">
        <h2>4. Who will run the business?</h2>
        <div class="form-grid">
            <div><label for="p4_key_individuals">Key Individuals</label><input type="text" id="p4_key_individuals" value="Mr. John Doe (CEO)"></div>
            <div><label for="p4_experience">Experience Summary</label><input type="text" id="p4_experience" value="20+ years of experience"></div>
        </div>
        <div class="output-section" id="output-4"></div>
    </div>

    <div class="assessment-point">
        <h2>5. Background checks/other regulators</h2>
        <div class="form-grid">
            <div><label for="p5_adverse_history">Adverse History (leave blank if none)</label><input type="text" id="p5_adverse_history"></div>
            <div><label for="p5_previous_reg">Previous Regulators</label><input type="text" id="p5_previous_reg" value="FCA (UK)"></div>
        </div>
        <div class="output-section" id="output-5"></div>
    </div>

    <div class="assessment-point">
        <h2>6. Systems and Controls</h2>
        <div><label for="p6_systems">Systems Overview</label><input type="text" id="p6_systems" value="client onboarding and transaction monitoring"></div>
        <div><label for="p6_outsourcing">Outsourcing Arrangements</label><input type="text" id="p6_outsourcing" value="regulated vendor in the UAE"></div>
        <div class="output-section" id="output-6"></div>
    </div>

    <div class="assessment-point">
        <h2>7. Compliance/Financial Crime Arrangements</h2>
        <div class="form-grid">
            <div><label for="p7_co">Compliance Officer Name</label><input type="text" id="p7_co" value="Mr. Smith"></div>
            <div><label for="p7_mlro">MLRO Name</label><input type="text" id="p7_mlro" value="Mr. Smith"></div>
            <div><label for="p7_tools">Screening Tools Used</label><input type="text" id="p7_tools" value="WorldCheck"></div>
        </div>
        <div class="output-section" id="output-7"></div>
    </div>

    <div class="assessment-point">
        <h2>8. Capital requirements and sources of wealth/funds</h2>
        <div class="form-grid">
            <div><label for="p8_capital">Capital Requirement</label><input type="text" id="p8_capital" value="$500,000"></div>
            <div><label for="p8_sof">Source of Funds</label><input type="text" id="p8_sof" value="shareholder injection"></div>
        </div>
        <div class="output-section" id="output-8"></div>
    </div>

    <div class="assessment-point">
        <h2>9. Any other disclosures/considerations</h2>
        <div><label for="p9_disclosures">Disclosures (leave blank if none)</label><textarea id="p9_disclosures"></textarea></div>
        <div class="output-section" id="output-9"></div>
    </div>
    
    <div class="assessment-point">
        <h2>10. Recommendation/IP conditions</h2>
        <div><label for="p10_rec">Recommendation</label><input type="text" id="p10_rec" value="Approval with standard conditions"></div>
        <div><label for="p10_cond">Conditions (leave blank if none)</label><input type="text" id="p10_cond" value="Satisfactory review of IT audit"></div>
        <div class="output-section" id="output-10"></div>
    </div>

    <button id="generate-btn">Generate All Assessments</button>
</div>

<script>
// --- JavaScript to Call the API ---
document.addEventListener('DOMContentLoaded', () => {
    
    const generateBtn = document.getElementById('generate-btn');
    const API_BASE_URL = 'https://dfsa.vercel.app'; // Your live API URL

    async function callApi(endpoint, body) {
        const outputDiv = document.getElementById(`output-${endpoint}`);
        outputDiv.textContent = 'Generating...';
        try {
            const response = await fetch(`${API_BASE_URL}/generate/${endpoint}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body),
            });
            if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
            const data = await response.json();
            outputDiv.textContent = data.assessment_text ? data.assessment_text.replace(/\*\*/g, '') : 'No sentence generated.'; 
        } catch (error) {
            outputDiv.textContent = `Error: ${error.message}`;
        }
    }

    generateBtn.addEventListener('click', () => {
        // Point 1
        callApi('1', { service_type: document.getElementById('p1_service_type').value, prudential_cat: document.getElementById('p1_prudential_cat').value, legal_status: document.getElementById('p1_legal_status').value, clients: document.getElementById('p1_clients').value });
        // Point 2
        callApi('2', { model_desc: document.getElementById('p2_model_desc').value, markets: document.getElementById('p2_markets').value, geo_scope: document.getElementById('p2_geo_scope').value, channels: document.getElementById('p2_channels').value });
        // Point 3
        callApi('3', { structure: document.getElementById('p3_structure').value, parent_name: document.getElementById('p3_parent_name').value, parent_jurisdiction: document.getElementById('p3_parent_jurisdiction').value, controller_name: document.getElementById('p3_controller_name').value, controller_perc: document.getElementById('p3_controller_perc').value });
        // Point 4
        callApi('4', { key_individuals: document.getElementById('p4_key_individuals').value, experience_summary: document.getElementById('p4_experience').value });
        // Point 5
        callApi('5', { adverse_history: document.getElementById('p5_adverse_history').value, previous_regulators: document.getElementById('p5_previous_reg').value });
        // Point 6
        callApi('6', { systems_overview: document.getElementById('p6_systems').value, outsourcing_arrangements: document.getElementById('p6_outsourcing').value });
        // Point 7
        callApi('7', { compliance_officer: document.getElementById('p7_co').value, mlro: document.getElementById('p7_mlro').value, screening_tools: document.getElementById('p7_tools').value });
        // Point 8
        callApi('8', { capital_requirement: document.getElementById('p8_capital').value, source_of_funds: document.getElementById('p8_sof').value });
        // Point 9
        callApi('9', { disclosures: document.getElementById('p9_disclosures').value });
        // Point 10
        callApi('10', { recommendation: document.getElementById('p10_rec').value, conditions: document.getElementById('p10_cond').value });
    });
});
</script>

</body>
</html>